{
  "jobs": {
    "nix-flake-update": {
      "permissions": {
        "contents": "write",
        "pull-requests": "write"
      },
      "runs-on": "ubuntu-latest",
      "steps": [
        {
          "id": "app-token",
          "uses": "actions/create-github-app-token@v1",
          "with": {
            "app-id": "${{ secrets.APP_ID }}",
            "private-key": "${{ secrets.APP_PRIVATE_KEY }}"
          }
        },
        {
          "uses": "actions/checkout@v4",
          "with": {
            "token": "${{ steps.app-token.outputs.token }}"
          }
        },
        {
          "uses": "nixbuild/nix-quick-install-action@master",
          "with": {
            "github_access_token": "${{ secrets.GITHUB_TOKEN }}",
            "nix_conf": "keep-env-derivations = true\nkeep-outputs = true\n"
          }
        },
        {
          "uses": "nix-community/cache-nix-action@main",
          "with": {
            "primary-key": "nix-${{ runner.os }}"
          }
        },
        {
          "uses": "mic92/update-flake-inputs@subdir",
          "with": {
            "commit-message": "chore(flake): update {{input}}{{in}}",
            "github-token": "${{ steps.app-token.outputs.token }}"
          }
        }
      ]
    }
  },
  "on": {
    "schedule": [
      {
        "cron": "0 0/6 * * *"
      }
    ],
    "workflow_dispatch": {}
  }
}
